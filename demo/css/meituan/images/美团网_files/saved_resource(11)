M.add("floor-promotion",function(a){a.mt.www.floorpromotion={init:function(){var b=a.one(".J-hots-countdown"),c=a.one(".J-hots-deals .J-slider-container"),d=a.one(".J-lottery-body");this.initCountDown(b),this.initHotsSlider(c),this.initLotterySlider(d),a.Global.fire("PageHeight:change")},initCountDown:function(b){function c(){var a=new Date,b=a.getHours(),c=0,d=[[11,13],[18,20]];f=!1;for(var e=0;e<d.length;e++){var g=d[e][0],h=d[e][1];if(g>b){c=a.setHours(g,0,0);break}if(b>=g&&h>b){c=a.setHours(h,0,0),f=!0;break}}return c||(c=new Date(a.setDate(a.getDate()+1)),c.setHours(11,0,0)),c-Date.now()}function d(){return e?void e.reset(c()):void a.use("www-deal-firstscreen",function(a){var d=function(a){return("0"+a).slice(-2).split("")},h=a.mt.www.DealFirstscreen.Countdown;e=new h(c(),{start:function(){var a=this,c=b.all(".J-time");a.nlSlots=c,c&&(c.each(function(b,c){b.all("span").each(function(b,e){b.setHTML(d(a.time[c+1])[e])}).show()}),f?(g&&g.addClass("status--going"),b.replaceClass("countdown-begin","countdown-end").show()):(g&&g.addClass("status--coming"),b.replaceClass("countdown-end","countdown-begin").show()))},step:function(a,b){b&&this.nlSlots.item(b-1).all("span").each(function(b,c){b.setHTML(d(a)[c])}).show()},done:function(){e.reset(c()),e.tick()}}),e.tick()})}if(b){var e,f=!1,g=b.one(".J-countdown-status");d()}},initHotsSlider:function(b){if(b){var c=b.all(".deal-list--hots");if(!(c.size()<2)){var d=b.next(".pre-next").one(".mt-slider-previous"),e=b.next(".pre-next").one(".mt-slider-next");a.use("w-slider",function(){var c,f;c={srcNode:".J-hots-deals",effect:"slideHorizontal",duration:400,autoPlay:!0,lazyloading:!0,pnAutoHide:!0,sheetContainer:b,previous:d,next:e},f=new a.mt.widget.Slider(c),f.render();var g=b.next(".pre-next");g&&f.after("indexChange",function(){g.one(".J-slider-next-index").setHTML(this.get("index")+1)})})}}},initLotterySlider:function(b){if(b){var c=b.all(".sheet");if(!(c.size()<2)){var d=b.next(".pre-next").one(".slider-previous"),e=b.next(".pre-next").one(".slider-next");a.use("w-slider",function(){var c,f;c={srcNode:".lottery",effect:"slideHorizontal",duration:400,lazyloading:!0,pnAutoHide:!0,sheetContainer:b,previous:d,next:e},f=new a.mt.widget.Slider(c),f.render()})}}}},a.mt.ComponentHub.attach("floor-promotion",function(){a.mt.www.floorpromotion.init()})},"1.0.0",{requires:["mt-base"]});