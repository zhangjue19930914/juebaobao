M.add("www-banner",function(a){function b(b,e){function f(){var a,c,d=[];for(a=0,c=k.size();c>a;++a)d.push('<li class="trigger-item"></li>');b.appendChild('<ul class="trigger ui-slider__triggers ui-slider__triggers--translucent ui-slider__triggers--small" style="display:none">'+d.join("")+"</ul>"),h=b.one(".trigger"),j=h.all("li")}var g,h=b.one(e.triggerContainer||".trigger"),i=b.one(e.sheetContainer||".sheet"),j=h&&h.all("> li"),k=i&&i.all("> li"),l={effect:"slideUp",interval:5e3};e.alwayson||(b.append('<a href="javascript:void(0)" class="F-glob F-glob-close common-close--iconfont-small close" title="关闭"></a>'),b.delegate("click",function(e){e.preventDefault(),g&&g.pause(),b.remove(!0),c&&8>c&&d.reflow(),a.Global.fire("PageHeight:change")},".close")),!k||k.size()<2||((!j||j.isEmpty())&&f(),e.triggerContainer=h,e.sheetContainer=i,e.srcNode=b,a.mix(e,l),a.use("w-slider",function(a){g=new a.mt.widget.Slider(e),g.render()}))}var c=a.UA.ie,d=a.mt.util,e=d.Cookie,f=a.mt.BigRender;a.mt.www.Banner={init:function(c){var e="J-banner-stamp-active";if(c=a.one(c),c&&!c.hasClass(e)){c.addClass(e);var g=d.decodeAttr(c,"banner-conf")||{};f.loadImmediately(c),b(c,g)}},Leftside:{success:function(b,c){var d=a.Node.create(c.html),e=M.PAGE_VIEW_DATA.page,f={};switch(a.one("body").prepend(d),e){case"index/nav":case"index/floor":f={topEdge:a.one(".site-fs").getY()+134,vTopOffset:100,vBottomOffset:200};break;case"s/default":f={topEdge:"#content"}}a.mt.www.Banner.Leftside.bindStickEvent(d,f,c.cn)},bindStickEvent:function(b,c,d){var f,g={vAlign:"top",vTopOffset:200,mainAreaWidth:980,hAlign:"right",vBottomOffset:140,bottomEdge:".site-info-w",side:"left",hideWhenTooNarrow:!0};c&&a.mix(g,c,!0),"undefined"==typeof g.topEdge&&(g.topEdge=a.one("#content").getY()-89),a.use("uix-sticky",function(a){f=new a.mt.uix.Sticky(b,g),b.delegate("click",function(a){a.halt();var c=e.getExpiresDate(1,0,0);b.remove(!0),f.destroy(),e.set(d,"1",c,"/","."+M.DOMAIN_HOST)},".close")})}},Unfold:{success:function(b,c,d){var e,f=d.node,g=a.one(".J-banner-newtop"),h=a.mt.www.Banner;g&&g.remove(!0),e=f.ancestor().insertBefore(c.html,f),h.Unfold._animate(e,c.cn,c.cv),h.init(e)},_animate:function(b,f,g){function h(b,c){var d=a.one(new Image);d.on("load",function(){c(b,d.get("height")),d.remove(!0)}),d.set("src",b),d.setStyles({position:"absolute",bottom:"-400px",left:0,visibility:"hidden",zIndex:-1})}var i,j=b.one("img"),k=b.one("a"),l=j.get("width"),m=j.get("height"),n=4e3,o=.3;e.set(f,g,e.getExpiresDate(10950,0,0),"/","."+M.DOMAIN_HOST),j.setAttribute("src",j.getData("fold-src")),b.setStyles({backgroundColor:b.getData("bg-color"),width:"100%"}),h(j.getData("unfold-src"),function(e,f){function g(){b.setStyle("height",f),d.reflow(),window.setTimeout(function(){j.set("height",m),b.setStyle("height",m),j.setAttribute("src",j.getData("fold-src")),d.reflow()},n)}function h(){if(b._node){var c=a.Node.create('<div style="width:100%;height:0;position:absolute;left:0;top:0;overflow:hidden"></div>'),d=a.Node.create('<img src="'+j.getData("fold-src")+'" width="'+l+'" height="'+m+'"/>');c.appendChild(k.cloneNode().append(d)),b.appendChild(c),new a.Anim({node:c,duration:o,to:{height:m}}).run().on("end",function(){p()}),i.set("to",{height:m}),i.on("end",function(){p(),b.one(".close")&&c.append(b.one(".close"))}),i.run()}}function p(){q&&(k.remove(!0),k=null),a.Global.fire("PageHeight:change"),q=!0}var q=!1;return j.setAttribute("src",e),j.set("height",f),8>c&&c>0?(g(),void a.Global.fire("PageHeight:change")):(i=new a.Anim({node:b,duration:o,to:{height:f}}),i.on("end",function(){i.detachAll(),a.Global.fire("PageHeight:change"),window.setTimeout(function(){h()},n)}),void i.run())})}}}},"1.0.0",{requires:["www-base","mt-bigrender"]});